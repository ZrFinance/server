from utils.string_extension import safe_intclass Pagination:    page_size = 20    max_page_size = 100    page_size_query_param = 'page_size'    page_query_param = 'page'    def _positive_int(self,integer_string, strict=False, cutoff=None):        """        Cast a string to a strictly positive integer.        """        ret = int(integer_string)        if ret < 0 or (ret == 0 and strict):            raise ValueError()        if cutoff:            return min(ret, cutoff)        return ret    def get_page_size(self,request):        try:            if self.page_size_query_param:                return self._positive_int(                    request.query_params[self.page_size_query_param],                    strict=True,                    cutoff=self.max_page_size                )        except (KeyError, ValueError):                pass        return self.page_size    def get_paginated(self,data, request):        data1=data        page_size = self.get_page_size(request)        page_number = safe_int(request.query_params.get(self.page_query_param, 1))        page_start = page_size * page_number - page_size        page_end = page_size * page_number        data = data[page_start:page_end]        headers = {            'Total': len(data1),            'X-Content-Range': "%d-%d" % (page_start, page_end)        }        return {'data':data,'header':headers}